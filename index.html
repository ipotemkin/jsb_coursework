<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Игра</title>
    <style>
        html {
            font-family: sans-serif;
        }

        .app {
            display: flex;
            flex-direction: column;
            gap: 12px;
            
            width: 200px;
            padding: 20px;
        }

        .content {
            display: flex;
            flex-direction: column;
            gap: 12px;

            /* width: 200px; */
        }


    </style>
</head>
<body>
    <div class="app"></div>

    <script>
    </script>
    <script src="template-engine.js"></script>
    <script src="templates.js"></script>
    <script src="utils.js"></script>
    <script src="requests.js"></script>
    <script src="screens.js"></script>
    <script>
        window.application = {
            root: undefined,
            token: undefined,
            nickName: undefined,
            gameId: undefined,
            enemy: undefined,
            timer: undefined,
            counter: 0,
            blocks: {},
            screens: {},
            renderScreen: function(screenName) {},
            // renderBlock: function(blockName, container) {},
            renderBlock: renderBlock,
            timers: []
        }
        
        const urlDomain = 'https://skypro-rock-scissors-paper.herokuapp.com/';
        const requests = new Requests(urlDomain);

        const app = window.application.root = document.querySelector('.app');
        window.application.blocks['example-button'] = renderExampleButton;
        window.application.blocks['example-input'] = renderInput;

        function renderButton(container, name, class_name='none') {
            const button = document.createElement('button');
            button.textContent = name;
            button.classList.add(class_name);

            button.addEventListener('click', () => {
                console.log('click');
            });

            container.appendChild(button);
        }

        function renderElement(container, type='div', name='', value='', class_name='none') {
            const element = document.createElement(type);
            // button.textContent = name;
            element.classList.add(class_name);
            element.value = value;

            element.addEventListener('click', () => {
                console.log('click');
            });

            container.appendChild(element);
        }

        function renderInput(container) {
            renderElement(container, 'input', 'testing input', 'testing name');
        }


        function renderExampleButton(container) {
            renderButton(container, 'Example');
        }

        function renderExampleScreen() {
            const app = document.querySelector('.app');
            app.textContent = '';

            const title = document.createElement('h1');
            title.textContent = 'Страница-пример';

            const content = document.createElement('div');
            content.classList.add('content');
                
            window.application.renderBlock('example-input', content);
            window.application.renderBlock('example-button', content);


            app.appendChild(title);
            app.appendChild(content);
        }

        function renderBlock(element, container) {
            window.application.blocks[element](container);
        }

        console.log(window.application);

        // renderExampleScreen();

        // ----- main -------
        
        
        function onGetPlayerList(response) {
            console.log(response);
        }


        // ----- end of main --------

        // const screen_1 = templateEngine(LoginPageTemplate());
        // app.appendChild(screen_1);

        renderLoginScreen();

        // const screen_2 = templateEngine(LobbyPageTemplate());
        // app.appendChild(screen_2);

        // const screen_3 = templateEngine(GamePageTemplate());
        // app.appendChild(screen_3);

        // const screen_4 = templateEngine(WaitingPageTemplate('Игрок 2', 'Ожидаем подключение соперника...'));
        // app.appendChild(screen_4);

        // const screen_5 = templateEngine(WaitingPageTemplate('Игрок 2', 'Ожидаем ход соперника...'));
        // app.appendChild(screen_5);

        // const screen_6 = templateEngine(FinalPageTemplate('Игрок 2', 'Вы проиграли!'));
        // app.appendChild(screen_6);

        // screen_6.innerHTML = '';

        // clearScreen();
        // const screen_7 = templateEngine(FinalPageTemplate('Игрок 2', 'Вы выиграли!'));
        // app.appendChild(screen_7);

    </script>
</body>
</html>